<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lázaro</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="container">
      <header class="page-header">
        <h1>Lázaro</h1>
        <p class="subtitle">Descansos inteligentes, a tu ritmo</p>
      </header>

      <section class="card">
        <div class="card-title-row">
          <h2>Runtime</h2>
          <span id="runtime-pill" class="pill">detenido</span>
        </div>
        <div class="runtime-grid" id="runtime-grid"></div>
        <div class="row actions-row">
          <button id="runtime-start">Iniciar runtime</button>
          <button id="runtime-stop" class="danger">Detener runtime</button>
          <button id="start-pending">Iniciar pendiente</button>
          <button id="snooze-pending">Posponer pendiente</button>
          <button id="trigger-micro">Forzar micro</button>
          <button id="trigger-rest">Forzar descanso</button>
          <button id="refresh">Refrescar</button>
        </div>
      </section>

      <section class="card">
        <div class="card-title-row">
          <h2>Perfiles</h2>
          <span class="muted">oficina, gaming, enfoque</span>
        </div>
        <div class="profiles-grid">
          <label>Perfil activo
            <select id="profile-select"></select>
          </label>
          <label>Nombre nuevo perfil
            <input type="text" id="profile-name" placeholder="Ejemplo: Gaming nocturno" />
          </label>
        </div>
        <div class="row actions-row">
          <button id="activate-profile">Activar perfil</button>
          <button id="create-profile">Crear desde ajustes</button>
          <button id="duplicate-profile" class="secondary">Duplicar seleccionado</button>
          <button id="delete-profile" class="danger">Eliminar seleccionado</button>
        </div>
      </section>

      <section class="card">
        <div class="card-title-row">
          <h2>Ajustes</h2>
          <div class="row compact-row">
            <button id="strict" class="secondary">Modo estricto</button>
            <button id="save-settings">Guardar ajustes</button>
          </div>
        </div>

        <form id="settings-form" class="settings-grid">
          <fieldset>
            <legend>Micro pausa</legend>
            <label>Intervalo
              <div class="unit-input">
                <input type="number" id="micro_interval_seconds" min="1" step="any" />
                <select id="micro_interval_seconds__unit">
                  <option value="seconds">seg</option>
                  <option value="minutes">min</option>
                </select>
              </div>
            </label>
            <label>Duración
              <div class="unit-input">
                <input type="number" id="micro_duration_seconds" min="1" step="any" />
                <select id="micro_duration_seconds__unit">
                  <option value="seconds">seg</option>
                  <option value="minutes">min</option>
                </select>
              </div>
            </label>
            <label>Posponer
              <div class="unit-input">
                <input type="number" id="micro_snooze_seconds" min="1" step="any" />
                <select id="micro_snooze_seconds__unit">
                  <option value="seconds">seg</option>
                  <option value="minutes">min</option>
                </select>
              </div>
            </label>
          </fieldset>

          <fieldset>
            <legend>Descanso</legend>
            <label>Intervalo
              <div class="unit-input">
                <input type="number" id="rest_interval_seconds" min="1" step="any" />
                <select id="rest_interval_seconds__unit">
                  <option value="seconds">seg</option>
                  <option value="minutes">min</option>
                </select>
              </div>
            </label>
            <label>Duración
              <div class="unit-input">
                <input type="number" id="rest_duration_seconds" min="1" step="any" />
                <select id="rest_duration_seconds__unit">
                  <option value="seconds">seg</option>
                  <option value="minutes">min</option>
                </select>
              </div>
            </label>
            <label>Posponer
              <div class="unit-input">
                <input type="number" id="rest_snooze_seconds" min="1" step="any" />
                <select id="rest_snooze_seconds__unit">
                  <option value="seconds">seg</option>
                  <option value="minutes">min</option>
                </select>
              </div>
            </label>
          </fieldset>

          <fieldset>
            <legend>Límite diario</legend>
            <label>Límite
              <div class="unit-input">
                <input type="number" id="daily_limit_seconds" min="1" step="any" />
                <select id="daily_limit_seconds__unit">
                  <option value="seconds">seg</option>
                  <option value="minutes">min</option>
                </select>
              </div>
            </label>
            <label>Posponer
              <div class="unit-input">
                <input type="number" id="daily_limit_snooze_seconds" min="1" step="any" />
                <select id="daily_limit_snooze_seconds__unit">
                  <option value="seconds">seg</option>
                  <option value="minutes">min</option>
                </select>
              </div>
            </label>
            <label>Reinicio (HH:MM)
              <input type="time" id="daily_reset_time" step="60" />
            </label>
          </fieldset>

          <fieldset>
            <legend>Comportamiento</legend>
            <label>Nivel de bloqueo
              <select id="block_level">
                <option value="soft">Suave</option>
                <option value="medium">Medio</option>
                <option value="strict">Estricto</option>
              </select>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="desktop_notifications" />
              Notificaciones de escritorio
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="overlay_notifications" />
              Overlay de descanso
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="sound_notifications" />
              Sonido
            </label>
            <label>Tema de sonido
              <input type="text" id="sound_theme" />
            </label>
          </fieldset>

          <fieldset>
            <legend>Inicio automático</legend>
            <label class="checkbox-label">
              <input type="checkbox" id="startup_xdg" />
              XDG autostart
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="startup_systemd_user" />
              systemd --user
            </label>
          </fieldset>
        </form>
        <input type="hidden" id="active_profile_id" />
      </section>

      <section class="card">
        <div class="card-title-row">
          <h2>Analíticas</h2>
          <span class="muted" id="analytics-summary">semana actual</span>
        </div>
        <div class="metrics-grid">
          <article class="metric"><span>Activo</span><strong id="metric-active">0s</strong></article>
          <article class="metric"><span>Micro completas</span><strong id="metric-micro">0</strong></article>
          <article class="metric"><span>Descansos completos</span><strong id="metric-rest">0</strong></article>
          <article class="metric"><span>Límites diarios</span><strong id="metric-daily">0</strong></article>
          <article class="metric"><span>Pospuestas/omitidas</span><strong id="metric-skipped">0</strong></article>
        </div>
        <div class="progress-wrap">
          <div class="progress-label-row">
            <span>Uso semanal vs objetivo</span>
            <span id="progress-text">0%</span>
          </div>
          <div class="progress-track">
            <div id="progress-bar" class="progress-bar"></div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="card-title-row">
          <h2>Eventos</h2>
          <button id="clear-events" class="secondary">Limpiar</button>
        </div>
        <ul id="events-list" class="events-list"></ul>
      </section>

      <section class="card debug-card">
        <div class="card-title-row">
          <h2>Debug JSON</h2>
          <button id="toggle-debug" class="secondary">Mostrar/Ocultar</button>
        </div>
        <pre id="debug-json" class="hidden">Sin datos</pre>
      </section>
    </main>

    <script src="./app.js" type="module"></script>
  </body>
</html>
